"use strict";(self.webpackChunkcurso_angular=self.webpackChunkcurso_angular||[]).push([[290],{6290:(W,h,a)=>{a.r(h),a.d(h,{BusesAdministrationModule:()=>V});var b=a(6814),l=a(1896),C=a(9548),y=a(2894),t=a(5879),_=a(8732),v=a(1798),f=a(2939),d=a(5313),g=a(617),m=a(2296);function M(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1," ID "),t.qZA())}function I(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function F(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1," Asientos "),t.qZA())}function S(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.cantidadAsientos," ")}}function N(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1," Patente "),t.qZA())}function Y(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.patente," ")}}function q(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1," Marca "),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",null==o.modelo?null:o.modelo.marca," ")}}function D(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1," Acciones "),t.qZA())}function U(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"td",12)(1,"button",13),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.seleccionarColectivo(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"create"),t.qZA()(),t.TgZ(4,"button",14),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.borrarColectivo(s))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete_sweep"),t.qZA()()()}}function L(e,i){1&e&&t._UZ(0,"tr",15)}function P(e,i){1&e&&t._UZ(0,"tr",16)}let w=(()=>{class e{constructor(o,n,c,s){this.busSrv=o,this.modelSrv=n,this.router=c,this.matSnackBar=s,this.displayedColumns=["id","patente","asientos","marca","acciones"]}ngOnInit(){this.busSrv.findAll().subscribe(o=>{this.busList=o.body.map(n=>{const c=new C.G(n.id,n.patente,n.cantidadAsientos,n.modeloId,n.modelo);return this.findModeloColectivo(c),c}),this.dataSource=this.busList})}seleccionarColectivo(o){this.router.navigate(["buses","detail",o.id])}findModeloColectivo(o){this.modelSrv.findOne(o.modeloId).subscribe(n=>{o.modelo=new y.Z(n.id,n.nombre,n.marca)})}loadColectivo(){this.busSrv.findAll().subscribe(o=>{o.body&&(this.busList=o.body.map(n=>new C.G(n.id,n.patente,n.cantidadAsientos,n.modeloId,n.modelo)),this.dataSource=this.busList)},o=>{})}borrarColectivo(o){this.busSrv.borrar(o.id).subscribe(n=>{this.matSnackBar.open("Se borro el colectivo correctamente","Cerrar"),this.loadColectivo()},n=>{this.matSnackBar.open("El Colectivo no se puede eliminar porque ya se encuantra asignado a un Viaje","Cerrar")})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.Z),t.Y36(v.y),t.Y36(l.F0),t.Y36(f.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-buses-list"]],decls:21,vars:3,consts:[["mat-icon-button","","routerLink","/buses/create",1,"crearBus"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","cabecera",4,"matCellDef"],["matColumnDef","asientos"],["matColumnDef","patente"],["matColumnDef","marca"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"cabecera"],["mat-fab","","color","primary",1,"acciones1",3,"click"],["mat-fab","","color","warn",1,"acciones",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(t.TgZ(0,"button",0)(1,"mat-icon"),t._uU(2,"add"),t.qZA()(),t.TgZ(3,"table",1),t.ynx(4,2),t.YNc(5,M,2,0,"th",3),t.YNc(6,I,2,1,"td",4),t.BQk(),t.ynx(7,5),t.YNc(8,F,2,0,"th",3),t.YNc(9,S,2,1,"td",4),t.BQk(),t.ynx(10,6),t.YNc(11,N,2,0,"th",3),t.YNc(12,Y,2,1,"td",4),t.BQk(),t.ynx(13,7),t.YNc(14,q,2,0,"th",3),t.YNc(15,O,2,1,"td",4),t.BQk(),t.ynx(16,8),t.YNc(17,D,2,0,"th",3),t.YNc(18,U,7,0,"td",4),t.BQk(),t.YNc(19,L,1,0,"tr",9),t.YNc(20,P,1,0,"tr",10),t.qZA()),2&o&&(t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,g.Hw,m.RK,m.cs,l.rH],styles:["mat-card[_ngcontent-%COMP%]{margin-bottom:8px}.acciones[_ngcontent-%COMP%]{margin-left:10px}.persona-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;margin:20px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mat-mdc-table[_ngcontent-%COMP%]{table-layout:auto;white-space:pre;background-color:#84c566}.mdc-data-table__table[_ngcontent-%COMP%]{min-width:80%;margin:auto;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__header-row[_ngcontent-%COMP%]{height:56px;background-color:#388625}.acciones[_ngcontent-%COMP%]{margin-left:10px;width:35px;height:35px}.acciones1[_ngcontent-%COMP%]{width:35px;height:35px}.crearBus[_ngcontent-%COMP%]{background-color:#84c566;margin-bottom:20px}.cabecera[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}"]}),e})();var r=a(6223),Z=a(5195),x=a(2032),p=a(9157),B=a(8525),A=a(3680);function J(e,i){1&e&&(t.TgZ(0,"mat-hint",13),t._uU(1," Campo requerido "),t.qZA())}function k(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,J,2,0,"mat-hint",12),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.busForm.controls.id.errors.required)}}function Q(e,i){1&e&&(t.TgZ(0,"mat-hint",13),t._uU(1," Campo requerido "),t.qZA())}function R(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Q,2,0,"mat-hint",12),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.busForm.controls.patente.errors.required)}}function H(e,i){1&e&&(t.TgZ(0,"mat-hint",13),t._uU(1," Campo requerido "),t.qZA())}function G(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,H,2,0,"mat-hint",12),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.busForm.controls.cantidadAsiento.errors.required)}}function z(e,i){if(1&e&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.marca)}}function $(e,i){1&e&&(t.TgZ(0,"mat-hint",13),t._uU(1," Campo requerido "),t.qZA())}function X(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,$,2,0,"mat-hint",12),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.busForm.controls.modeloId.errors.required)}}let T=(()=>{class e{constructor(o,n,c,s,u,j){this.busSrv=o,this.modeloSrv=n,this.route=c,this.router=s,this.fb=u,this.matSnackBar=j,this.selectedBus=null,this.modelos=[],this.busForm=this.fb.group({id:["",r.kI.required],patente:["",r.kI.required],cantidadAsiento:["",r.kI.required],modeloId:["",r.kI.required]})}ngOnInit(){this.route.paramMap.subscribe(o=>{const n=o.get("id");n&&this.findBus(Number(n))}),this.loadMarca()}findBus(o){this.busSrv.findOne(o).subscribe(n=>{this.selectedBus=n.body,this.busForm.patchValue({id:n.body.id,patente:n.body.patente,cantidadAsiento:n.body.cantidadAsientos,modeloId:n.body.modeloId})})}guardarCambios(){const o=this.busForm.get("modeloId").value,n=this.modelos.find(s=>s.id===o),c={id:this.busForm.get("id").value,patente:this.busForm.get("patente").value,cantidadAsientos:this.busForm.get("cantidadAsiento").value,modeloId:o,modelo:n};this.selectedBus&&this.selectedBus.id?this.busSrv.actualizarColectivo(c).subscribe(s=>{this.matSnackBar.open("Se guardaron los cambios del Colectivo","Cerrar"),this.router.navigate(["buses","list"])},s=>{this.matSnackBar.open(s,"Cerrar")}):this.busSrv.crearColectivo(c).subscribe(s=>{this.matSnackBar.open("Se cre\xf3 el Colectivo correctamente","Cerrar"),this.router.navigate(["buses","list"])},s=>{this.matSnackBar.open(s,"Cerrar")})}loadMarca(){this.modeloSrv.findAll().subscribe(o=>{this.modelos=o.body,console.log(this.modelos)},o=>{console.log("Error al obtener las Marcas",o)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.Z),t.Y36(v.y),t.Y36(l.gz),t.Y36(l.F0),t.Y36(r.qu),t.Y36(f.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-buses-detail"]],decls:31,vars:7,consts:[[3,"formGroup","ngSubmit"],["routerLink","/buses/list","mat-icon-button","",1,"go-back-button"],[1,"bus-container",2,"padding","20px"],[1,"title"],[1,"busInput"],["matInput","","type","text","formControlName","id"],[4,"ngIf"],["matInput","","type","text","formControlName","patente"],["matInput","","type","number","formControlName","cantidadAsiento"],["formControlName","modeloId"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"disabled"],["style","color: red",4,"ngIf"],[2,"color","red"],[3,"value"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.guardarCambios()}),t.TgZ(1,"button",1)(2,"mat-icon"),t._uU(3,"arrow_back"),t.qZA()(),t.TgZ(4,"mat-card",2)(5,"div",3)(6,"h2"),t._uU(7,"Crear / Editar Colectivo"),t.qZA()(),t.TgZ(8,"mat-form-field",4)(9,"mat-label"),t._uU(10,"Id:"),t.qZA(),t._UZ(11,"input",5),t.YNc(12,k,2,1,"div",6),t.qZA(),t.TgZ(13,"mat-form-field",4)(14,"mat-label"),t._uU(15,"Patente:"),t.qZA(),t._UZ(16,"input",7),t.YNc(17,R,2,1,"div",6),t.qZA(),t.TgZ(18,"mat-form-field",4)(19,"mat-label"),t._uU(20,"Cantidad de Asientos:"),t.qZA(),t._UZ(21,"input",8),t.YNc(22,G,2,1,"div",6),t.qZA(),t.TgZ(23,"mat-form-field",4)(24,"mat-label"),t._uU(25,"Modelo"),t.qZA(),t.TgZ(26,"mat-select",9),t.YNc(27,z,2,2,"mat-option",10),t.qZA(),t.YNc(28,X,2,1,"div",6),t.qZA(),t.TgZ(29,"button",11),t._uU(30,"Guardar"),t.qZA()()()),2&o&&(t.Q6J("formGroup",n.busForm),t.xp6(12),t.Q6J("ngIf",n.busForm.controls.id.invalid&&(n.busForm.controls.id.dirty||n.busForm.controls.id.touched)),t.xp6(5),t.Q6J("ngIf",n.busForm.controls.patente.invalid&&(n.busForm.controls.patente.dirty||n.busForm.controls.patente.touched)),t.xp6(5),t.Q6J("ngIf",n.busForm.controls.cantidadAsiento.invalid&&(n.busForm.controls.cantidadAsiento.dirty||n.busForm.controls.cantidadAsiento.touched)),t.xp6(5),t.Q6J("ngForOf",n.modelos),t.xp6(1),t.Q6J("ngIf",n.busForm.controls.modeloId.invalid&&(n.busForm.controls.modeloId.dirty||n.busForm.controls.modeloId.touched)),t.xp6(1),t.Q6J("disabled",n.busForm.invalid))},dependencies:[b.sg,b.O5,Z.a8,g.Hw,x.Nt,p.KE,p.hX,p.bx,m.lW,m.RK,B.gD,A.ey,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,l.rH],styles:[".bus-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:80%;background:rgb(132,197,102);margin:auto}.busInput[_ngcontent-%COMP%]{width:50%;align-self:center}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px}.go-back-button[_ngcontent-%COMP%]{bottom:7px;background-color:#84c566}.mat-mdc-button[_ngcontent-%COMP%]:not(:disabled){color:#fff}.mat-mdc-button.mat-mdc-button-base[_ngcontent-%COMP%], .mat-mdc-raised-button.mat-mdc-button-base[_ngcontent-%COMP%], .mat-mdc-unelevated-button.mat-mdc-button-base[_ngcontent-%COMP%], .mat-mdc-outlined-button.mat-mdc-button-base[_ngcontent-%COMP%]{height:36px;width:18%;background-color:#388625;margin:auto}"]}),e})();const E=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:w},{path:"create",component:T},{path:"detail/:id",component:T}];let K=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(E),l.Bz]}),e})(),V=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[b.ez,Z.QW,d.p0,g.Ps,x.c,m.ot,B.LD,A.Ng,f.ZX,r.UX,p.lN,K]}),e})()}}]);